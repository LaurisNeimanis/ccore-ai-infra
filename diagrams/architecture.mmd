flowchart TD

    %% === Developer + CI ===
    A[Developer Commit] --> B[GitHub Actions CI]

    %% Terraform pipeline
    B --> C[Terraform Init / Validate / Plan / Apply]

    %% Remote state (recommended)
    C --> D[S3 Remote State + DynamoDB Lock]

    %% Terraform modules
    C --> E[VPC Module]
    C --> F[EC2 Module]
    C --> G[Security Groups]

    %% Terraform outputs â†’ Ansible
    C --> H[Terraform Outputs]
    H --> I[Generate Ansible Inventory]

    %% Ansible deployment
    B --> J[Ansible Provisioning]

    J --> K[Install Docker Engine]
    J --> L[Generate Docker Compose + Pull GHCR Images]
    J --> M[Apply Nginx Reverse Proxy + SSL]

    %% App deployment
    L --> N["Backend + Frontend (GHCR Images)"]
    N --> O[Docker Compose Stack Running on EC2]

    %% Public access
    M --> P[Public HTTPS Endpoint]
